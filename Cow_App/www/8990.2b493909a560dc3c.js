"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8990],{8990:(M,g,u)=>{u.r(g),u.d(g,{QuestionnairePageModule:()=>S});var p=u(177),f=u(4341),i=u(9420),d=u(403),m=u(467),e=u(4438),h=u(3278),_=u(6463);let b=(()=>{var n;class r{transform(t){return t?t.replace(/_/g," ").replace(/\b\w/g,o=>o.toUpperCase()):""}}return(n=r).\u0275fac=function(t){return new(t||n)},n.\u0275pipe=e.EJ8({name:"underscoreToTitle",type:n,pure:!0,standalone:!0}),r})();const k=n=>["/questionnaire2",n];function y(n,r){if(1&n){const s=e.RV6();e.j41(0,"div",12),e.bIt("click",function(){const o=e.eBV(s).$implicit,a=e.XpG();return e.Njj(a.toggleDiseaseSelection(o))}),e.j41(1,"label",13),e.EFF(2),e.nI1(3,"underscoreToTitle"),e.k0s(),e.nrm(4,"ion-checkbox",14),e.k0s()}if(2&n){const s=r.$implicit,t=e.XpG();e.AVh("selected",t.selectedDiseases.has(s)),e.R7$(),e.FS9("for",s),e.R7$(),e.JRh(e.bMT(3,6,s)),e.R7$(2),e.FS9("id",s),e.Y8G("checked",t.selectedDiseases.has(s))}}function P(n,r){if(1&n){const s=e.RV6();e.j41(0,"ion-button",15),e.bIt("click",function(){e.eBV(s);const o=e.XpG();return e.Njj(o.onSubmitData())}),e.j41(1,"div",16),e.EFF(2,"Next"),e.k0s(),e.nrm(3,"ion-icon",17),e.k0s()}}function v(n,r){if(1&n&&(e.j41(0,"ion-button",18)(1,"div",16),e.EFF(2,"Next"),e.k0s(),e.nrm(3,"ion-icon",17),e.k0s()),2&n){const s=e.XpG();e.Y8G("routerLink",e.eq3(1,k,s.id))}}const x=[{path:"",component:(()=>{var n;class r{constructor(t,o,a,c){this.themeService=t,this.router=o,this.apiService=a,this.urlParam=c,this.selectedDiseases=new Set,this.diseases=[],this.results=[],this.urlDataExist=!1,this.id=this.urlParam.snapshot.paramMap.get("id"),this.themeToggle=this.themeService.isDark(),this.getSymptoms(),this.urlParam.queryParams.subscribe(l=>{l.base_symptoms?(this.urlDataExist=!0,this.urlParamData={base_symptoms:l.base_symptoms,user_define_symptoms:l.user_define_symptoms}):this.urlDataExist=!1})}ngAfterViewInit(){this.applyTheme()}applyTheme(){this.themeService.toggleTheme(this.themeToggle)}BackBtn(){history.back()}toggleDiseaseSelection(t){this.selectedDiseases.has(t)?this.selectedDiseases.delete(t):this.selectedDiseases.add(t);const o={};this.diseases.forEach(a=>{o[a]=this.selectedDiseases.has(a)?1:0}),localStorage.setItem("disease",JSON.stringify(o))}getSymptoms(){var t=this;this.apiService.getToken().then(o=>{this.apiService.getSymptomsAPI(o.access_token).then(function(){var a=(0,m.A)(function*(c){"success"==c.response_type&&(t.diseases=c.symptoms,t.results=[...t.diseases])});return function(c){return a.apply(this,arguments)}}()).catch(function(){var a=(0,m.A)(function*(c){console.log(c)});return function(c){return a.apply(this,arguments)}}())}).catch(o=>{console.error(o)})}onSubmitData(){var t=this;return(0,m.A)(function*(){try{t.apiService.showLoading();const a=(yield t.apiService.getToken()).access_token,c={cowId:t.id,symptoms_base_on_time:t.urlParamData.base_symptoms,user_summarized_symptoms:t.urlParamData.user_define_symptoms,diseases:JSON.parse(localStorage.getItem("disease")||"[]")},l=yield t.apiService.createPredictDiseaseAPI(a,c);console.log(l),t.apiService.removeLoading(),"success"===l.response_type&&(localStorage.removeItem("disease"),t.router.navigate(["/result",t.id]))}catch(o){t.apiService.removeLoading(),console.error(o)}})()}handleInput(t){var o;const c=(null===(o=t.target.value)||void 0===o?void 0:o.toLowerCase())||"";this.results=this.diseases.filter(l=>l.toLowerCase().includes(c))}trackDisease(t,o){return o}}return(n=r).\u0275fac=function(t){return new(t||n)(e.rXU(h.F),e.rXU(d.Ix),e.rXU(_.G),e.rXU(d.nX))},n.\u0275cmp=e.VBU({type:n,selectors:[["app-questionnaire"]],decls:20,vars:5,consts:[[1,"main_back_btn"],[1,"close_btn",3,"click"],["name","chevron-back-outline"],[1,"main_content"],[1,"first_row"],["size","12"],[3,"ionInput","debounce"],[2,"background","none"],[1,"symptom-container"],["class","symptom-button",3,"selected","click",4,"ngFor","ngForOf","ngForTrackBy"],["class","next_btn","slot","end",3,"click",4,"ngIf"],["class","next_btn","slot","end",3,"routerLink",4,"ngIf"],[1,"symptom-button",3,"click"],[3,"for"],[2,"display","none",3,"checked","id"],["slot","end",1,"next_btn",3,"click"],[1,"button_next"],["name","arrow-forward-outline"],["slot","end",1,"next_btn",3,"routerLink"]],template:function(t,o){1&t&&(e.j41(0,"div",0)(1,"ion-buttons")(2,"ion-button",1),e.bIt("click",function(){return o.BackBtn()}),e.nrm(3,"ion-icon",2),e.k0s()()(),e.j41(4,"ion-content")(5,"ion-grid",3)(6,"ion-row",4)(7,"ion-col",5)(8,"h2"),e.EFF(9,"Choose the Symptoms You See in Your Cow"),e.k0s(),e.j41(10,"p"),e.EFF(11,"This will be adapted by the questionnaire"),e.k0s()()(),e.j41(12,"ion-searchbar",6),e.bIt("ionInput",function(c){return o.handleInput(c)}),e.k0s(),e.j41(13,"ion-list",7)(14,"div",8),e.DNE(15,y,5,8,"div",9),e.k0s()()()(),e.j41(16,"ion-footer")(17,"ion-toolbar"),e.DNE(18,P,4,0,"ion-button",10)(19,v,4,3,"ion-button",11),e.k0s()()),2&t&&(e.R7$(12),e.Y8G("debounce",1e3),e.R7$(3),e.Y8G("ngForOf",o.results)("ngForTrackBy",o.trackDisease),e.R7$(3),e.Y8G("ngIf",o.urlDataExist),e.R7$(),e.Y8G("ngIf",!o.urlDataExist))},dependencies:[p.Sq,p.bT,i.Jm,i.QW,i.eY,i.hU,i.W9,i.M0,i.lO,i.iq,i.nf,i.ln,i.S1,i.ai,i.hB,i.Gw,i.N7,d.Wk,b],styles:[".main_back_btn[_ngcontent-%COMP%]{position:fixed;top:20px;left:0;z-index:11}.close_btn[_ngcontent-%COMP%]{font-size:20px;color:#0f452b}.symptom-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px;justify-content:center;padding:10px}.symptom-button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:10px 15px;border-radius:20px;font-size:14px;cursor:pointer;background-color:#89a095;color:#fff;transition:background-color .3s ease}.symptom-button[_ngcontent-%COMP%]:hover{background-color:#57635d}.symptom-button.selected[_ngcontent-%COMP%]{background-color:#0f452b}.first_row[_ngcontent-%COMP%]{text-align:center}.main_content[_ngcontent-%COMP%]{margin-top:50px!important}.main_content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:700;font-size:27px}ion-list[_ngcontent-%COMP%]{display:flex;flex-direction:row}ion-item[_ngcontent-%COMP%]{--background: #d0dbd6;border-radius:35px;margin:13px 0;width:-moz-fit-content;width:fit-content}.next_btn[_ngcontent-%COMP%]{--background: #0f452b;margin-right:15px}.questions_list_dark[_ngcontent-%COMP%]{--background: #0f452b4d !important}.selected[_ngcontent-%COMP%]{color:#fff;--background: #0f452b !important}"]}),r})()}];let T=(()=>{var n;class r{}return(n=r).\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.$C({type:n}),n.\u0275inj=e.G2t({imports:[d.iI.forChild(x),d.iI]}),r})(),S=(()=>{var n;class r{}return(n=r).\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.$C({type:n}),n.\u0275inj=e.G2t({imports:[p.MD,f.YN,i.bv,T]}),r})()}}]);